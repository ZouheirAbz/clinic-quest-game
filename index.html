<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clinic Quest+ Game</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f4f4f4; display: flex; justify-content: center; }
    .container { max-width: 600px; background: white; padding: 20px; border-radius: 8px; margin-right: 20px; }
    .log-container { width: 300px; background: #ffffff; border-radius: 8px; padding: 20px; height: fit-content; }
    h1 { text-align: center; }
    button { margin: 5px 0; padding: 10px; width: 100%; }
    #log { margin-top: 10px; background: #eee; padding: 10px; border-radius: 4px; max-height: 500px; overflow-y: auto; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Clinic Quest Mission</h1>
    <input type="text" id="repName" placeholder="Enter Sales Rep Name" style="width:100%;padding:10px;margin-bottom:10px;">
    <button onclick="startGame()">Start Game</button>
    <div id="actions" style="display:none">
      <button onclick="assignMission()">Assign Mission</button>
      <button onclick="promoteProduct()">Promote Product</button>
      <button onclick="completeMission()">Complete Mission</button>
      <button onclick="patientScan()">Patient Scan Ad</button>
      <button onclick="showStatus()">Show Status</button>
    </div>
  </div>

  <div class="log-container">
    <h2>Activity Log</h2>
    <div id="log"></div>
  </div>

  <script>
    let rep = { name: "", points: 0, missions: [], promotions: [], visits: 0, feedback: 0, missedCheckins: 0 };
    let doctors = ["Dr. Smith", "Dr. Johnson", "Dr. Patel", "Dr. Kim", "Dr. Lopez"];
    let patients = ["John", "Amina", "Carlos", "Lena", "Raj"];
    let products = ["CardioPro", "VitaBoost", "ImmunoMax", "NeuroZen", "OsteoCare"];
    let doctor = { name: doctors[Math.floor(Math.random() * doctors.length)], points: 0, promotions: [] };
    let patient = { name: patients[Math.floor(Math.random() * patients.length)], points: 0 };

    function log(msg) {
      const logDiv = document.getElementById("log");
      logDiv.innerHTML += `<div>> ${msg}</div>`;
      logDiv.scrollTop = logDiv.scrollHeight;
    }

    function startGame() {
      rep.name = document.getElementById("repName").value || "SalesRep";
      document.getElementById("actions").style.display = "block";
      log(`Game started for ${rep.name}`);
    }

    function assignMission() {
      let product = products[Math.floor(Math.random() * products.length)];
      let mission = { product, doctor: doctor.name, completed: false };
      rep.missions.push(mission);
      rep.points += 50;
      rep.visits++;
      log(`Pharma Company assigned a mission: Promote ${product} at ${doctor.name}'s clinic. +50 points`);
    }

    function promoteProduct() {
      let product = products[Math.floor(Math.random() * products.length)];
      let ad = `Promo_${product}_${Math.floor(Math.random()*9000+1000)}`;
      doctor.promotions.push(ad);
      rep.promotions.push(ad);
      rep.points += 150;
      log(`${rep.name} promoted ${product} at ${doctor.name}'s clinic. +150 points`);
    }

    function completeMission() {
      let incomplete = rep.missions.find(m => !m.completed);
      if (incomplete && Math.random() < 0.7) {
        incomplete.completed = true;
        rep.points += 250;
        doctor.points += 100;
        rep.feedback++;
        log(`Mission for ${incomplete.product} completed at ${incomplete.doctor}! +250 rep, +100 doctor`);
      } else {
        rep.missedCheckins++;
        log("Mission failed or none available. Missed check-in recorded.");
      }
    }

    function patientScan() {
      if (doctor.promotions.length > 0) {
        let ad = doctor.promotions[Math.floor(Math.random() * doctor.promotions.length)];
        patient.points += 100;
        rep.points += 50;
        log(`${patient.name} scanned ${ad}. +100 patient, +50 rep`);
      } else {
        log("No ads available to scan.");
      }
    }

    function showStatus() {
      log(`<strong>Status</strong><br>
      Rep: ${rep.name} - ${rep.points} pts<br>
      Doctor: ${doctor.name} - ${doctor.points} pts<br>
      Patient: ${patient.name} - ${patient.points} pts<br>
      Missions: ${rep.missions.length}, Promotions: ${rep.promotions.length}<br>
      Badges: ${getBadges().join(", ")}`);
    }

    function getBadges() {
      let badges = [];
      if (rep.visits >= 5) badges.push("üçÑ Mushroom Boost");
      if (rep.feedback >= 3) badges.push("‚≠ê Star Mode");
      if (rep.missedCheckins >= 2) badges.push("üçå Banana Peel");
      return badges;
    }
  </script>
</body>
</html>
